MVI D,38H
MVI E,85H

MVI A,10H ;clear the unused lcd digits
STA 0BF2H
STA 0BF3H
STA 0BF4H
STA 0BF5H

MVI A,0DH ;interrupt mask to allow rst 6.5
SIM
EI ;enable interrupts

WAIT: JMP WAIT

INTR_ROUTINE:
POP H ;reduce stack
CALL KIND ;read keyboard
STA 0BF1H
RLC
RLC
RLC
RLC
MOV B,A
CALL KIND
STA 0BF0H
ADD B
MOV B,A
PUSH D
LXI D,0BF0H
CALL STDM
CALL DCD
POP D
MOV A,B

CMP D
JC LED0
JZ LED1
CMP E
JC LED1
JZ LED1

MVI A,FBH
JMP FINISH
LED0: MVI A,FEH
JMP FINISH
LED1: MVI A,FDH
JMP FINISH
FINISH:
STA 3000H
EI
JMP WAIT

END